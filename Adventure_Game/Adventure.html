<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Adventure Game</title>
    </head>
    <body>
        <h1>Adventure Game v1.0</h1>
        <p>made by: Markus Nixon</p>
        <script>
            var inventory = {
                medallions:0,
                rusty_key:0,
                sword:0,
            }
            
            var invList = function(){
                alert("Medallions = "+ inventory.medallions +
                     "Keys = "+ inventory.rusty_key +
                     "Swords = "+ inventory.sword);
            }
            Start();
            
        function Start(){
            
            var playerName = prompt("Who are you?");
            
            alert("You wake up in a musty cell.");
            
            var startGame = confirm("Do you try to escape?");
            
                if(startGame){
                    Cell();
                }
                else{
                    alert("Then Starvation takes you.");
                }
            
            }
        
        function Cell(){
            var cell = prompt("You are chained up to the wall, the chains look rusted beyond imagination").toLowerCase();
            
            switch(cell){
                    
                case "break chains":
                    alert("The chains break with considerable ease.");
                    Cell_Standing();
                    break;
                case "break chain":
                    alert("The chain breaks with considerable ease.");
                    Cell_Standing();
                    break;
                case "call out":
                    alert("Nothing happens.");
                    Cell();
                    break;
                case "escape chains":
                    alert("As you wiggle your hands the chains break apart.");
                    Cell_Standing();
                    break;
                case "inventory":
                    invList();
                    Cell();
                default:
                    alert("You don't know how to " + cell);
                    Cell();
                    break;
                       }
            }
            function Cell_Standing(){
                var standing = prompt("You are standing in an empty cell made of stone slabs, there is an old cot, a rusty metal cell door, and the floor is littered with garbage.").toLowerCase();
                
                switch(standing){
                        
                    case "break door":
                        alert("You slam against the unyielding door, your shoulder hurts. a ragged cloaked figure appears out of nowhere.");
                        Cloaked_Figure();
                        break;
                    case "call out":
                        alert("As you holler a cloaked figure appears in your cell.");
                        Cloaked_Figure();
                        break;
                    case "inspect wall":
                        alert("You can't find any loose stones.");
                        Cell_Standing();
                        break;
                    case "check wall":
                        alert("You can't find any loose stones.");
                        Cell_Standing();
                        break;
                    case "check floor":
                        alert("You find a shiny blue stone on the floor.");
                        Stone();
                        break;
                    case "inspect floor":
                        alert("You find a shiny blue stone on the floor.");
                        Stone();
                        break;
                    case "search floor":
                        alert("You find a shiny blue stone on the floor.");
                        Stone();
                        break;
                    case "check cot":
                        alert("You found a medallion in the frame.");
                        inventory.medallions = inventory.medallions = 1;
                        Cell_Standing();
                        break;
                    case "inspect cot":
                        alert("You found a medallion in the frame.");
                        inventory.medallions = inventory.medallions = 1;
                        Cell_Standing();
                        break;
                    case "search cot":
                        alert("You found a medallion in the frame.");
                        inventory.medallions = inventory.medallions = 1;
                        Cell_Standing();
                        break;
                    case "unlock door":
                        alert("It wasn't locked the entire time!");
                        alert("You PULL the door open");
                        Dark_Hall();
                        break;
                    case "open door":
                        alert("With a creak the door opens into a dark hallway.");
                        Dark_Hall();
                        break;
                    case "inventory":
                        invList();
                        Cell_Standing();
                    default:
                        alert("You don't know how to " + standing);
                        Cell_Standing();
                        break;
                        }
            }
            function Cloaked_Figure(){
                var figure = prompt("You wanna buy something to get out?").toLowerCase();
                if(figure == "buy sword" || figure == "buy key" && inventory.medallions < 1){
                    alert("You have nothing to buy it with.");
                    Cell_Standing();
                }
                else if(figure == "sword" || figure == "key" && inventory.medallions < 1){
                    alert("You have nothing to buy it with.");
                    Cell_Standing();
                }
                else if(figure == "buy key" || figure == "key" && inventory.medallions >= 1){
                    alert("It swipes a medallion and gives you a rusty key.");
                    inventory.rusty_key = inventory.rusty_key + 1;
                    alert("you have "+inventory.rusty_key+" rusty key.");
                    inventory.medallions = inventory.medallions - 1;
                    alert("You have "+inventory.medallions+" medallions remaining.");
                    Cloaked_Figure();
                }
                else if(figure == "buy sword" || figure == "sword" && inventory.medallions >= 1){
                    alert("It swipes a medallion and gives you a sword.");
                    inventory.sword = inventory.sword + 1;
                    alert("you have "+inventory.sword+" sword.");
                    inventory.medallions = inventory.medallions - 1;
                    alert("You have "+inventory.medallions+" medallions.")
                    Cloaked_Figure();
                }
                else if(figure == "no"){
                    alert("Fine then, it grumbles as it disappears.")
                    Cell_Standing();
                }
                else if(figure == "inventory"){
                    invList();
                    Cloaked_Figure();
                }
                else if(Cell_Standing());
            }
            function Dark_Hall(){
                var hall = prompt("The hallway goes left and right.").toLowerCase();
    
                switch(hall){
                    
                    case "left":
                        alert("You find stairs leading into darkness.");
                        Into_The_Darkness();
                        break;
                    case "go left":
                        alert("You find stairs leading into darkness.");
                        Into_The_Darkness();
                        break;
                    case "right":
                        alert("The hall leads to what appears to be a cave-in.")
                        Cave_In();
                        break;
                    case "go right":
                        alert("The hall leads to what appears to be a cave-in.")
                        Cave_In();
                        break;
                    case "inventory":
                        invList();
                        Dark_Hall();
                }
            }
            function Cave_In(){
                var caveIn = confirm("Do you go back?");
                
                if(caveIn){
                    Dark_Hall();
                }
                else{
                    alert("Nothing happens.");
                    Cave_In();
                }
            }
            function Stone(){
                var stone = prompt("As you pick up the stone your vision fogs over, then you find yourself in an empty room with a north and south door.").toLowerCase();
                
                switch(stone){
                        
                    case "north":
                        alert("You open the door to find a nasty two-headed troll!");
                        Troll();
                        break;
                    case "north door":
                        alert("You open the door to find a nasty two-headed troll!");
                        Troll();
                        break;
                    case "south":
                        alert("The door leads to staris leading up into darkness");
                        Into_The_Darkness();
                        break;
                    case "south door":
                        alert("The door leads to staris leading up into darkness");
                        Into_The_Darkness();
                        break;
                    case "inventory":
                        invList();
                        Stone();
                    default:
                        alert("You don't know how to " + stone);
                        Stone();
                        break;
                }
            }
            function Troll(){
                var troll = confirm("Do you slam the door?");
            
                if(troll){
                    Stone();
                }
                else if(inventory.sword >= 1){
                    alert("You pull your sword to defend yourself!");
                    Combat_Troll();
                }
                else{
                    alert("The troll rips you apart, you died!");
                    Death();
                }
            }
            function Combat_Troll(){
                var fightTroll = prompt("What do you do?").toLowerCase();
                
                switch(fightTroll){
                        
                    case "swing sword":
                        alert("You defeat the troll.");
                        Troll_Room();
                        break;
                    case "inventory":
                        invList();
                        Combat_Troll();
                    default:
                        alert("The troll rips you to pieces!");
                        Death();
                        break;
                                 }
            }
            function Troll_Room(){
                alert("You find a room full of what's left of the trolls previous meals, with a single door on the north end.");
                Into_The_Darkness();
            }
            function Into_The_Darkness(){
                alert("Thank you for playing my demo!");
            }
            function Death(){
                alert("Thank you for playing my demo!");
            }
            
            
            
        </script>
    </body>   
</html>